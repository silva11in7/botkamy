<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configurações | Kamy Control</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/global.css">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="/static/global.js"></script>
    <style>
        .config-grid { max-width: 800px; display: grid; gap: 2rem; }
        .section-card { background: var(--card-bg); border-radius: 20px; border: 1px solid var(--border); padding: 2rem; transition: background 0.3s; }
        label { display: block; margin-bottom: 0.75rem; color: var(--text-dim); font-size: 0.875rem; }
        input, select, textarea { width: 100%; background: var(--input-bg); border: 1px solid var(--border); color: var(--text-main); padding: 0.75rem 1rem; border-radius: 8px; outline: none; transition: 0.2s; }
        input:focus { border-color: var(--primary); }
        button.save-btn { background: var(--primary); color: white; border: none; padding: 0.75rem 2rem; border-radius: 8px; font-weight: 600; cursor: pointer; transition: 0.2s; }
    </style>
</head>
<body>
    {% include 'base_sidebar.html' %}

    <main class="main">
        <header style="margin-bottom:3rem">
            <h1 style="margin:0">Configurações</h1>
            <p style="color:var(--text-dim)">Gerencie integrações e parâmetros do sistema.</p>
        </header>

        <form action="/configuracoes" method="post" class="config-grid">
            <div class="section-card">
                <h3 style="margin-top:0"><i data-lucide="bot" style="width:18px; vertical-align:middle"></i> Controle do Robô</h3>
                <div style="margin-bottom:1.5rem">
                    <label>Modo Manutenção</label>
                    <select name="maintenance_mode">
                        <option value="false" {{ 'selected' if settings.maintenance_mode == 'false' }}>DESATIVADO (Bot Online)</option>
                        <option value="true" {{ 'selected' if settings.maintenance_mode == 'true' }}>ATIVADO (Bot Offline para Usuários)</option>
                    </select>
                </div>
                <div style="margin-bottom:1.5rem">
                    <label>Usuário de Suporte (Telegram)</label>
                    <input type="text" name="support_user" value="{{ settings.support_user }}">
                </div>
            </div>

            <div class="section-card">
                <h3 style="margin-top:0"><i data-lucide="refresh-cw" style="width:18px; vertical-align:middle"></i> Script de Recuperação</h3>
                <div style="margin-bottom:1.5rem">
                    <label>Mensagem Padrão de Recuperação</label>
                    <textarea name="recovery_message" rows="3">{{ settings.recovery_message }}</textarea>
                </div>
            </div>

            <div class="section-card">
                <h3 style="margin-top:0"><i data-lucide="webhook" style="width:18px; vertical-align:middle"></i> Integração Oasy.fy</h3>
                <div style="margin-bottom:1.5rem">
                    <label>Token de Validação</label>
                    <input type="text" name="webhook_token" value="{{ settings.webhook_token }}">
                </div>
                <div style="background: var(--primary-glow); padding: 1rem; border-radius: 8px; font-size: 0.8rem; color: var(--text-dim)">
                    SUA URL DE WEBHOOK: <code>http://seu-dominio.com/webhook</code>
                </div>
            </div>

            <button type="submit" class="save-btn">Salvar Todas as Alterações</button>
        </form>
    </main>
    <script>lucide.createIcons();</script>
</body>
</html>
